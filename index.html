<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title id="title"></title>
  <link rel="icon" href="favicon.ico">
  <meta id="content" name="description" content="海外栄養表示の簡単作成ツールです。最新の米国FDA栄養表示ルールに対応。" />
  <link rel="stylesheet" href="style.css">
  <!-- Twitterカード -->
  <meta name="twitter:title" content="ぽちっと栄養表示" />
  <meta name="twitter:url" content="https://www.pochi.ml/" />
  <meta name="twitter:description" content="海外栄養表示の簡単作成ツールです。最新の米国FDA栄養表示ルールに対応。" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@uyc3mp" />
  <meta name="twitter:image" content="https://www.pochi.ml/logo.png" />
</head>

<body>
  <header>
    <div class="logo">
      <a href="index.html">
        <img class="logo" src="logo2.png" class="logo" alt="ロゴ">
      </a>
    </div>
    <div class="info">
      <p id="info"></p>
    </div> <select id="select">
      <option value="default">select language</option>
      <option value="ja">日本語</option>
      <option value="de">Deutsch</option>
    </select>
  </header>
  <main>
    <div class="main_container">
      <form name="form">
        <table border="1px">
          <tr>
            <th id=spc></th>
            <th>Servings per container</th>
            <td><input type="number" name="servingsPerContainer" size="5" maxlength="3" onKeyUp="goodman()">
              servings</td>
          </tr>
          <tr>
            <th id=ss></th>
            <th>Serving size(g)</th>
            <td><input type="number" name="servingSize" value="" size="5" maxlength="5" onKeyUp="goodman()"> g
            </td>
          </tr>
          <tr>
            <th id=sso></th>
            <th>Serving size(Other than"g")
            <td><input type="text" name="servingText" size="20" maxlength="20" onKeyUp="goodman()">
            </td>
          </tr>
        </table>
        <table border="1px">
          <tr>
            <th id="nt"></th>
            <th>Nutrients</th>
            <th></th>
          </tr>
          <tr>
            <th id="cl"></th>
            <th>Calories</th>
            <td><input type="number" name="calories" value="" size="5" maxlength="5" onKeyUp="goodman()">
              kcal/100g</td>
          </tr>
          <tr>
            <th id="tf"></th>
            <th>Total Fat</th>
            <td><input type="number" name="totalFat" value="" size="5" maxlength="5" onKeyUp="goodman()"> g/100g
            </td>
          </tr>
          <tr>
            <th id="sf"></th>
            <th>saturated Fat</th>
            <td><input type="number" name="saturatedFat" value="" size="5" maxlength="5" onKeyUp="goodman()">
              g/100g</td>
          </tr>
          <tr>
            <th id="tr"></th>
            <th>Trans Fat</th>
            <td><input type="number" name="transFat" value="" size="5" maxlength="5" onKeyUp="goodman()"> g/100g
            </td>
          </tr>
          <tr>
            <th id="co"></th>
            <th>Cholesterol</th>
            <td><input type="number" name="cholesterol" value="" size="5" maxlength="5" onKeyUp="goodman()">
              mg/100g</td>
          </tr>
          <tr>
            <th id="so"></th>
            <th>Sodium</th>
            <td><input type="number" name="sodium" value="" size="5" maxlength="5" onKeyUp="goodman()"> mg/100g</td>
          </tr>
          <tr>
            <th id="tc"></th>
            <th>Total Carbonhydrate</th>
            <td><input type="number" name="totalCarbonhydrate" value="" size="5" maxlength="5" onKeyUp="goodman()">
              g/100g</td>
          </tr>
          <tr>
            <th id=df></th>
            <th>Dietary Fiber</th>
            <td><input type="number" name="dietaryFiber" value="" size="5" maxlength="5" onKeyUp="goodman()">
              g/100g</td>
          </tr>
          <tr>
            <th id="ts"></th>
            <th>Total Sugars</th>
            <td><input type="number" name="totalSugars" value="" size="5" maxlength="5" onKeyUp="goodman()">
              g/100g</td>
          </tr>
          <tr>
            <th id="as"></th>
            <th>Added Sugars</th>
            <td><input type="number" name="addedSugars" value="" size="5" maxlength="5" onKeyUp="goodman()">
              g/100g</td>
          </tr>
          <tr>
            <th id="pr"></th>
            <th>Protein</th>
            <td><input type="number" name="protein" value="" size="5" maxlength="5" onKeyUp="goodman()"> g/100g
            </td>
          </tr>
          <tr>
            <th id="vd"></th>
            <th>Vitamin D</th>
            <td><input type="number" name="vitaminD" value="" size="5" maxlength="5" onKeyUp="goodman()"> mcg/100g
            </td>
          </tr>
          <tr>
            <th id="ca"></th>
            <th>Calcium</th>
            <td><input type="number" name="calcium" value="" size="5" maxlength="5" onKeyUp="goodman()"> mg/100g
            </td>
          </tr>
          <tr>
            <th id="ir"></th>
            <th>Iron</th>
            <td><input type="number" name="iron" value="" size="5" maxlength="5" onKeyUp="goodman()"> mg/100g</td>
          </tr>
          <tr>
            <th id="po"></th>
            <th>Potassium</th>
            <td><input type="number" name="potassium" value="" size="5" maxlength="5" onKeyUp="goodman()">
              mg/100g</td>
          </tr>
        </table>
      </form>
      <div class="arrow">
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
        <img src="arrow.gif" alt="右矢印" 　>
      </div>
      <div class="table" id="facts">
        <div class="facts_title">Nutrition Facts</div>
        <div class="facts_serving_pre"><span id="perContainer1"></span> servings per container</div>
        <div class="ss">
          <div class="facts_serving_size">Serving size</div>
          <div class="facts_serving_size"><span id="servingText1"></span> (<span id="servingSize1"></span>g)</div>
        </div>
        <div class="facts_box">
          <div class="fact_row_norule"><small>Amount Per Serving</small></div>
          <div class="fact_row calories">
            <div class="calorieamt"><span id="calories1"></span></div>
            <strong>Calories</strong>
          </div>
        </div>
        <div class="facts_box thin">
          <div class="fact_row txt_right"><strong><small>% Daily Value*</small></strong></div>
          <div class="fact_row">
            <div><strong><span id="totalFatDV"></span>%</strong></div><strong>Total Fat </strong><span
              id="totalFat1"></span>g
          </div>
          <div class="fact_row sub">
            <div><strong><span id="saturatedFatDV"></span>%</strong></div>Saturated Fat <span
              id="saturatedFat1"></span>g
          </div>
          <div class="fact_row sub"><em>Trans</em> Fat <span id="transFat1"></span>g</div>
          <div class="fact_row">
            <div><strong><span id="cholesterolDV"></span>%</strong></div><strong>Cholesterol</strong> <span
              id="cholesterol1"></span>mg
          </div>
          <div class="fact_row">
            <div><strong><span id="sodiumDV"></span>%</strong></div><strong>Sodium</strong> <span id="sodium1"></span>mg
          </div>
          <div class="fact_row">
            <div><strong><span id="totalCarbonhydrateDV"></span>%</strong></div><strong>Total Carbohydrate</strong>
            <span id="totalCarbonhydrate1"></span>g
          </div>
          <div class="fact_row sub">
            <div><strong><span id="dietaryFiberDV"></span>%</strong></div>Dietary Fiber <span
              id="dietaryFiber1"></span>g
          </div>
          <div class="fact_row sublv2">Total Sugars <span id="totalSugars1"></span>g</div>
          <div class="fact_row sublv3">
            <div><strong><span id="addedSugarsDV"></span>%</strong></div>Includes <span id="addedSugars1"></span>g Added
            Sugars
          </div>
          <div class="fact_row"><strong>Protein</strong> <span id="protein1"></span>g</div>
        </div>
        <div class="facts_box">
          <div class="fact_row">
            <div><span id="vitaminDDV"></span>%</div>Vitamin D <span id="vitaminD1"></span>mcg
          </div>
          <div class="fact_row">
            <div><span id="calciumDV"></span>%</div>Calcium <span id="calcium1"></span>mg
          </div>
          <div class="fact_row">
            <div><span id="ironDV"></span>%</div>Iron <span id="iron1"></span>mg
          </div>
          <div class="fact_row">
            <div><span id="potassiumDV"></span>%</div>Potassium <span id="potassium1"></span>mg
          </div>
        </div>
        <div class="facts_descr">
          The % Daily Value (DV) tells you how much a nutrient in a serving of food contributes to a daily diet. 2,000
          calories a day is used for general nutrition advice.
        </div>
      </div>
    </div>
    <div class="btn">
      <input id="display" type="button" onclick=" clickBtn1()" />
      <input id="delete" type="button" onclick=" clickBtn2()" /></div>
    <div class="result" id="result"> </div>
  </main>
  <footer>
    <small> powered by <a href="https://www.pochi.ml/DGT/"> DGT group</a> </small>
    <small> Open Source Tool. Code available at <a
        href="https://github.com/katayamahide/katayamahide.github.io">GitHub</a></small>
  </footer>


  <script>
    function goodman() {
      // パッケージ当たり食数 Servings per container
      // 値を取得
      let valuePerContainer = document.form.servingsPerContainer.value;
      // 栄養表示に出力
      document.getElementById("perContainer1").textContent = valuePerContainer;

      // サービングサイズテキスト Servings size text
      // 値を取得
      let valueServingText = document.form.servingText.value;
      // 栄養表示に出力
      document.getElementById("servingText1").textContent = valueServingText;

      // サービングサイズ Servings size
      // 値を取得
      let valueServingSize = document.form.servingSize.value;
      // 栄養表示に出力
      document.getElementById("servingSize1").textContent = valueServingSize;
      // 1 食分あたり割合を計算
      let servingSizePercent = valueServingSize / 100;


      // ■熱量 Calories
      // 値を取得、サービングサイズ当たりの値を計算
      let valueCalories = document.form.calories.value * servingSizePercent;

      if (valueCalories <= 50) {
        // 5刻みで丸める
        valueCalories = Math.round(valueCalories * 2 / 10) * 10 / 2;
      } else {
        // 10刻みで丸める
        valueCalories = Math.round(valueCalories / 10) * 10;
      }
      // 栄養表示に出力
      document.getElementById("calories1").textContent = valueCalories;


      // ■総脂質 Total Fat
      // 値を取得
      let valueTotalFat = document.form.totalFat.value * servingSizePercent;
      // %DVを計算 DV=78
      let valueTotalFatDV = valueTotalFat / 78 * 100;
      // %DVを四捨五入
      valueTotalFatDV = Math.round(valueTotalFatDV);

      if (valueTotalFat <= 5) {
        // 0.5刻みで丸める
        valueTotalFat = Math.round(valueTotalFat * 2) / 2;
      } else {
        // 1刻みで丸める
        valueTotalFat = Math.round(valueTotalFat);
      }
      // 栄養表示に出力
      document.getElementById("totalFat1").textContent = valueTotalFat;
      // %DVに出力
      document.getElementById("totalFatDV").textContent = valueTotalFatDV;


      // ■飽和脂肪酸 Saturated Fat
      // 値を取得
      let valueSaturatedFat = document.form.saturatedFat.value * servingSizePercent;
      // %DVを計算 DV=20
      let valueSaturatedFatDV = valueSaturatedFat / 20 * 100;
      // %DVを四捨五入
      valueSaturatedFatDV = Math.round(valueSaturatedFatDV);

      if (valueSaturatedFat <= 5) {
        // 0.5刻みで丸める
        valueSaturatedFat = Math.round(valueSaturatedFat * 2) / 2;
      } else {
        // 1刻みで丸める
        valueSaturatedFat = Math.round(valueSaturatedFat);
      }
      // 栄養表示に出力
      document.getElementById("saturatedFat1").textContent = valueSaturatedFat;
      // %DVに出力
      document.getElementById("saturatedFatDV").textContent = valueSaturatedFatDV;

      // ■ トランス脂肪酸 Trans Fat
      // 値を取得
      let valueTransFat = document.form.transFat.value * servingSizePercent;

      if (valueTransFat <= 5) {
        // 0.5刻みで丸める
        valueTransFat = Math.round(valueTransFat * 2) / 2;
      } else {
        // 1刻みで丸める
        valueTransFat = Math.round(valueTransFat);
      }
      // 栄養表示に出力
      document.getElementById("transFat1").textContent = valueTransFat;

      // ■ コレステロール Cholesterol
      // 値を取得
      let valueCholesterol = document.form.cholesterol.value * servingSizePercent;
      // %DVを計算 DV=300
      let valueCholesterolDV = valueCholesterol / 300 * 100;
      // %DVを四捨五入
      valueCholesterolDV = Math.round(valueCholesterolDV);


      if (valueCholesterol < 5) {
        // 5mg未満
        valueCholesterol = "less than 5";
      } else {
        // 5刻みで丸める
        valueCholesterol = Math.round(valueCholesterol * 2 / 10) * 10 / 2;
      }
      // 栄養表示に出力
      document.getElementById("cholesterol1").textContent = valueCholesterol;
      // %DVに出力
      document.getElementById("cholesterolDV").textContent = valueCholesterolDV;

      // ■ ナトリウム sodium
      // 値を取得
      let valueSodium = document.form.sodium.value * servingSizePercent;
      // %DVを計算 DV=2300
      let valueSodiumDV = valueSodium / 2300 * 100;
      // %DVを四捨五入
      valueSodiumDV = Math.round(valueSodiumDV);

      if (valueSodium <= 140) {
        // 5刻みで丸める
        valueSodium = Math.round(valueSodium * 2 / 10) * 10 / 2;
      } else {
        // 10刻みで丸める
        valueSodium = Math.round(valueSodium / 10) * 10;
      }
      // 栄養表示に出力
      document.getElementById("sodium1").textContent = valueSodium;
      // %DVに出力
      document.getElementById("sodiumDV").textContent = valueSodiumDV;

      // ■ 総炭水化物 Total Carbonhydrate
      // 値を取得
      let valueTotalCarbonhydrate = document.form.totalCarbonhydrate.value * servingSizePercent;
      // %DVを計算 DV=275
      let valueTotalCarbonhydrateDV = valueTotalCarbonhydrate / 275 * 100;
      // %DVを四捨五入
      valueTotalCarbonhydrateDV = Math.round(valueTotalCarbonhydrateDV);

      if (valueTotalCarbonhydrate < 1) {
        // 1未満
        valueTotalCarbonhydrate = "less than 1";
      } else {
        // 1刻みで丸める
        valueTotalCarbonhydrate = Math.round(valueTotalCarbonhydrate);
      }
      // 栄養表示に出力
      document.getElementById("totalCarbonhydrate1").textContent = valueTotalCarbonhydrate;
      // %DVに出力
      document.getElementById("totalCarbonhydrateDV").textContent = valueTotalCarbonhydrateDV;

      // ■ 食物繊維 Dietary fiber
      // 値を取得
      let valueDietaryFiber = document.form.dietaryFiber.value * servingSizePercent;
      // %DVを計算 DV=28
      let valueDietaryFiberDV = valueDietaryFiber / 28 * 100;
      // %DVを四捨五入
      valueDietaryFiberDV = Math.round(valueDietaryFiberDV);

      if (valueDietaryFiber < 1) {
        // 1未満
        valueDietaryFiber = "less than 1";
      } else {
        // 1刻みで丸める
        valueDietaryFiber = Math.round(valueDietaryFiber);
      }
      // 栄養表示に出力
      document.getElementById("dietaryFiber1").textContent = valueDietaryFiber;
      // %DVに出力
      document.getElementById("dietaryFiberDV").textContent = valueDietaryFiberDV;

      // ■ 総糖類 Total Sugars
      // 値を取得
      let valueTotalSugars = document.form.totalSugars.value * servingSizePercent;

      if (valueTotalSugars < 1) {
        // 1未満
        valueTotalSugars = "less than 1";
      } else {
        // 1刻みで丸める
        valueTotalSugars = Math.round(valueTotalSugars);
      }
      // 栄養表示に出力
      document.getElementById("totalSugars1").textContent = valueTotalSugars;

      // ■ 添加糖類 Total Sugars
      // 値を取得
      let valueAddedSugars = document.form.addedSugars.value * servingSizePercent;
      // %DVを計算 DV=50
      let valueAddedSugarsDV = valueAddedSugars / 50 * 100;
      // %DVを四捨五入
      valueAddedSugarsDV = Math.round(valueAddedSugarsDV);

      // 1刻みで丸める
      valueAddedSugars = Math.round(valueAddedSugars);

      // 栄養表示に出力
      document.getElementById("addedSugars1").textContent = valueAddedSugars;
      // %DVに出力
      document.getElementById("addedSugarsDV").textContent = valueAddedSugarsDV;

      // ■ たんぱく質 Protein
      // 値を取得
      let valueProtein = document.form.protein.value * servingSizePercent;

      if (valueProtein < 1) {
        // 1未満
        valueProtein = "less than 1";
      } else {
        // 1刻みで丸める
        valueProtein = Math.round(valueProtein);
      }
      // 栄養表示に出力
      document.getElementById("protein1").textContent = valueProtein;

      // ■ ビタミンD vitaminD
      // 値を取得
      let valueVitaminD = document.form.vitaminD.value * servingSizePercent;
      // %DVを計算 DV=20
      let valueVitaminDDV = valueVitaminD / 20 * 100;
      if (valueVitaminDDV < 2) {
        valueVitaminDDV = "0";
      } else if (valueVitaminDDV <= 10) {
        //2刻みで丸める
        valueVitaminDDV = Math.round(valueVitaminDDV / 2) * 2;
      } else if (valueVitaminDDV <= 50) {
        //5刻みで丸める
        valueVitaminDDV = Math.round(valueVitaminDDV * 2 / 10) * 10 / 2;
      } else {
        valueVitaminDDV = Math.round(valueVitaminDDV / 10) * 10;
      }
      // 0.1刻みで丸める
      valueVitaminD = Math.round(valueVitaminD * 10) / 10;

      // 栄養表示に出力
      document.getElementById("vitaminD1").textContent = valueVitaminD;
      // %DVに出力
      document.getElementById("vitaminDDV").textContent = valueVitaminDDV;

      // ■ カルシウム Calcium
      // 値を取得
      let valueCalcium = document.form.calcium.value * servingSizePercent;
      // %DVを計算 DV=1300
      let valueCalciumDV = valueCalcium / 1300 * 100;
      if (valueCalciumDV < 2) {
        valueCalciumDV = "0";
      } else if (valueCalciumDV <= 10) {
        //2刻みで丸める
        valueCalciumDV = Math.round(valueCalciumDV / 2) * 2;
      } else if (valueCalciumDV <= 50) {
        //5刻みで丸める
        valueCalciumDV = Math.round(valueCalciumDV * 2 / 10) * 10 / 2;
      } else {
        valueCalciumDV = Math.round(valueCalciumDV / 10) * 10;
      }

      // 10刻みで丸める
      valueCalcium = Math.round(valueCalcium / 10) * 10;

      // 栄養表示に出力
      document.getElementById("calcium1").textContent = valueCalcium;
      // %DVに出力
      document.getElementById("calciumDV").textContent = valueCalciumDV;

      // ■ 鉄分 Iron
      // 値を取得
      let valueIron = document.form.iron.value * servingSizePercent;
      // %DVを計算 DV=18
      let valueIronDV = valueIron / 18 * 100;
      if (valueIronDV < 2) {
        valueIronDV = "0";
      } else if (valueIronDV <= 10) {
        //2刻みで丸める
        valueIronDV = Math.round(valueIronDV / 2) * 2;
      } else if (valueIronDV <= 50) {
        //5刻みで丸める
        valueIronDV = Math.round(valueIronDV * 2 / 10) * 10 / 2;
      } else {
        valueIronDV = Math.round(valueIronDV / 10) * 10;
      }

      // 0.1刻みで丸める
      valueIron = Math.round(valueIron * 10) / 10;

      // 栄養表示に出力
      document.getElementById("iron1").textContent = valueIron;
      // %DVに出力
      document.getElementById("ironDV").textContent = valueIronDV;

      // ■ カリウム Potassium
      // 値を取得
      let valuePotassium = document.form.potassium.value * servingSizePercent;
      // %DVを計算 DV=4700
      let valuePotassiumDV = valuePotassium / 4700 * 100;
      if (valuePotassiumDV < 2) {
        valuePotassiumDV = "0";
      } else if (valuePotassiumDV <= 10) {
        //2刻みで丸める
        valuePotassiumDV = Math.round(valuePotassiumDV / 2) * 2;
      } else if (valuePotassiumDV <= 50) {
        //5刻みで丸める
        valuePotassiumDV = Math.round(valuePotassiumDV * 2 / 10) * 10 / 2;
      } else {
        valuePotassiumDV = Math.round(valuePotassiumDV / 10) * 10;
      }

      // 10刻みで丸める
      valuePotassium = Math.round(valuePotassium / 10) * 10;

      // 栄養表示に出力
      document.getElementById("potassium1").textContent = valuePotassium;
      // %DVに出力
      document.getElementById("potassiumDV").textContent = valuePotassiumDV;
    }

    function clickBtn2() {
      _delete_child_element('result');

      function _delete_child_element(id_name) {
        var dom_obj = document.getElementById(id_name);
        while (dom_obj) dom_obj.removeChild(dom_obj.firstChild);
      }
    }
  </script>

  <script src="html2canvas.js"></script>
  <script type="text/javascript">
    function clickBtn1() {
      html2canvas(document.getElementById("facts"), {
        scale: 2
      }).then(function (canvas) {
        var result = document.querySelector("#result");
        result.innerHTML = '';
        result.appendChild(canvas);
      });
    }
  </script>

  <script src="script.js"></script>
</body>

</html>